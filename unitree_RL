# How to try out unitree RL on unbuntu
# I've done it via using unitree g1 29 dof

# 1. install isaac lab
# 1 - 1 download anaconda or conda
# 1 - 2 create conda in python 3.11 for isaac lab 5.0 or above, and 3.10 for isaac lab 4.5
# 1 - 3 https://isaac-sim.github.io/IsaacLab/main/source/setup/installation/index.html#local-installation follow instructions for me I installed it via  pip install
# 1 - 4 After installing isaac lab /sim follow https://github.com/unitreerobotics/unitree_rl_lab guidance.
         Remeber to install nvidia drivers.

# 2. Train 
# 2 - 1 For the default settings. It needs at least 5k iters with 4k envs for it to start walking, and about 10k iters to walk and follow directions
# 2 - 2 To adjust rewards the file to fix is in unitree_rl_lab/source/unitree_rl_lab/unitree_rl_lab/tasks/locomotion/robots/g1/29dof

# 3. Deploy 
# 3 - 1 In turminal 

# Install dependencies
sudo apt install -y libyaml-cpp-dev libboost-all-dev libeigen3-dev libspdlog-dev libfmt-dev
# Install unitree_sdk2
git clone git@github.com:unitreerobotics/unitree_sdk2.git
cd unitree_sdk2
mkdir build && cd build
cmake .. -DBUILD_EXAMPLES=OFF # Install on the /usr/local directory
sudo make install
# Compile the robot_controller
cd unitree_rl_lab/deploy/robots/g1_29dof # or other robots
mkdir build && cd build
cmake .. && make

# 3 - 2 Download mujoco I've used C++ version in https://github.com/unitreerobotics/unitree_mujoco
# 3 - 3 Change settings in unitree_mujoco/simulate/config.yaml to the required settings. Also change 

   # policy_dir: config/policy/velocity
    policy_dir: /home/____/unitree_rl_lab/deploy/robots/g1_29dof/config/policy/velocity/

if required 

# 3 - 4 To use joystick as a controller i installed joystick add on (I used 8bitdo ultimale 2 with C to A usb gender no addition setup needed, you can check connection in https://hardwaretester.com/gamepad)
sudo apt update
sudo apt install -y joystick evtest
# 3 - 5 In one turminal open mujoco simulation via the following command 
cd unitree_mujoco/simulate/build
./unitree_mujoco
        and in one turminal opne unitree controller via the following command

cd unitree_rl_lab/deploy/robots/g1_29dof/build
./g1_ctrl

# 3 - 5 -1 for me the following problem happend

~$ cd unitree_rl_lab/deploy/robots/g1_29dof/build ./g1_ctrl
 --- Unitree Robotics --- 
G1-29dof Controller [2025-10-16 10:54:49.991] 
[info] Waiting for connection to robot... 
[2025-10-16 10:54:51.994] [
warning] Waiting for connection rt/lowstate

# 3 - 5 - 1 This was due to controller not being able to commuicate with the simulator. This was mended by chainging the controller setting
cd ~/unitree_rl_lab/deploy/robots/g1_29dof/build
./g1_ctrl --network lo

# 3 - 6 The trained policy is in unitree_rl_lab/logs/rsl_rl/unitree_g1_29dof_velocity/2025-09-18_16-48-22/exported/policy.onnx 
copy the policy and change the policy in unitree_rl_lab/deploy/robots/g1_29dof/config/policy/velocity/v0/exported/policy.onnx to a desired policy of choice
